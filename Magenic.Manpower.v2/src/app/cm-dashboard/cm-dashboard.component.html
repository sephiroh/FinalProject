<div class="panel-group">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div id="cr-head" class="panel-heading lightseagreen">
                <span class="panel-title">
                    <i class="glyphicon glyphicon-dashboard"></i> Consultant Manager
                </span>
            </div>
            <cm-dashboard-filter (onFilter)="filter($event)"></cm-dashboard-filter>
            <table id="cr-table" class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Request Date</th>
                        <th>Reference No.</th>
                        <th>Skill</th>
                        <th>Applicant Lvl</th>
                        <th>Project</th>
                        <th>Date Closed</th>
                        <th>Hired Applicant</th>
                        <th>Applicant Start Date</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let request of requests">
                        <td id="cr-data-requestDate-{{request.requestNumber}}">{{request.requestDate | dateOrNull:"MM-dd-yyyy":"N/A"}}</td>
                        <td id="cr-data-requestNumber-{{request.requestNumber}}">
                            {{request.requestNumber}}
                        </td>
                        <td id="cr-data-primarySkillName-{{request.requestNumber}}">{{request.primarySkillName}}</td>
                        <td id="cr-data-applicantLevelName-{{request.requestNumber}}">{{request.applicantLevelName}}</td>
                        <td id="cr-data-projectName-{{request.requestNumber}}">{{request.projectName}}</td>
                        <td id="cr-data-dateClosed-{{request.requestNumber}}">{{request.dateFilled | dateOrNull:"MM-dd-yyyy":"-"}}</td>
                        <td id="cr-data-applicantName-{{request.requestNumber}}">{{request.applicantName}}</td>
                        <td id="cr-data-applicantStartDate-{{request.requestNumber}}">{{request.applicantStartDate | dateOrNull:"MM-dd-yyyy":"-"}}</td>
                        <td id="cr-data-status-{{request.requestNumber}}">
                            <i *ngIf="request.status == 1" class="glyphicon glyphicon-phone-alt text-info" title="Open"></i>
                            <i *ngIf="request.status == 2" class="glyphicon glyphicon-tag text-primary" title="Hired"></i>
                            <i *ngIf="request.status == 3" class="glyphicon glyphicon-remove-circle text-danger" title="Closed. Reason: {{request.reason}}"></i>
                        </td>
                        <td>
                            <button class="btn btn-xs" (mousedown)="toggleRequest(request)" (mouseup)="dashReason.showModal()" [disabled]="request.status != 1">{{request.status==3?'Cancelled':'Cancel'}} Request</button>
                        </td>
                    </tr>
                    <tr *ngIf="requests && requests.length == 0"><td colspan="10">No records to display.</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<cm-dashboard-reason #dashReason (onSubmit)="cancel($event)" [request]="this.request"></cm-dashboard-reason>
<simple-notifications [options]="options"></simple-notifications>